<launch>
    <arg name="workspace_name" default="staubli"/>
    <arg name="experiment_type" default="normal" />

    <!--<include file="$(find freenect_launch)/launch/freenect.launch">
        <arg name="depth_registration" value="true" />
        <arg name="bond" value="true" />
        <arg name="data_skip" value="5"/>
    </include>-->
    <include file="$(find kinect2_bridge)/launch/kinect2_bridge.launch">
	    <arg name="depth_method" value="opencl" />
	    <arg name="publish_tf" value="true" />
	    <arg name="fps_limit" value="24" />
    </include>


    <!-- <node pkg="model_rec2" name="model_rec" type="ObjRecRANSACRun" /> -->
    <include file="$(find pc_filter)/launch/pc_filter.launch"/>

    <include file="$(find objrec_ros_integration)/launch/objrec_node.launch" />

      <param name="frame_id" type="string" value="/kinect2_rgb_optical_frame"/>
      <param name="grid0_size_x" type="int" value="7"/>
      <param name="grid0_size_y" type="int" value="4"/>
      <param name="board_type" value="chess"/>
      <param name="rect0_size_x" type="double" value="0.03"/>
      <param name="rect0_size_y" type="double" value="-0.03"/>
      <param name="type0" value="/world_raw"/>
      <param name="~use_simple_tf" type="bool" value="true"/>
      <param name="message_throttle" type="int" value="10"/>
      <param name="experiment_type" value="$(arg experiment_type)"/>

    <node pkg="checkerboard_detector" type="checkerboard_detector" name="checkerboard_detector" >
      <remap from="image" to="/kinect2/hd/image_color_rect" />
      <remap from="camera_info" to="/kinect2/hd/camera_info" />
    </node>

    <node pkg="table_detector" type="table_detector" name="table_detector" />

    <node pkg="filter_tf" type="filter_tf.py" name="filter_tf" />

    <node pkg="checkerboard_detector" type="objectdetection_tf_publisher.py" name="checkerboard_tf_publisher">
        <param name="use_simple_tf" value="true" />
    </node>


</launch>
